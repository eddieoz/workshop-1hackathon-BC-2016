<!doctype>
    <html>
    <body>
	<script type="text/javascript" src="../js/web3.js"></script>
	<script type="text/javascript" src="../js/lightwallet.js"></script>
    <script type="text/javascript">
	
	
	var Web3 = require('web3');
    var web3 = new Web3();
	var eth = web3.eth;
		
	var txutils = lightwallet.txutils;
	var signing = lightwallet.signing;
	var encryption = lightwallet.encryption;

	// Endereços dos Dapps
	var pokeCoinAddress = '0xf43f2487E6f385b7e15b583D1cB4b61BF1e31349';
	var pokeCentralAddress = '0xaec2D22fAB72BE8b9fB71359D833a4819Cf47186';
	var pokeMarketAddress = '0xaec2D22fAB72BE8b9fB71359D833a4819Cf47186';

	// ABI dos três Dapps
	var abiPokeCoin = '[ { "constant": true, "inputs": [], "name": "name", "outputs": [ { "name": "", "type": "string", "value": "Pokecoin" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_spender", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "approve", "outputs": [ { "name": "success", "type": "bool" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "totalSupply", "outputs": [ { "name": "", "type": "uint256", "value": "10000" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_from", "type": "address" }, { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transferFrom", "outputs": [ { "name": "success", "type": "bool" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "standard", "outputs": [ { "name": "", "type": "string", "value": "Pokecoin 0.1" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" } ], "name": "balanceOf", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "symbol", "outputs": [ { "name": "", "type": "string", "value": "pkc" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transfer", "outputs": [], "type": "function" }, { "constant": false, "inputs": [ { "name": "_spender", "type": "address" }, { "name": "_value", "type": "uint256" }, { "name": "_extraData", "type": "bytes" } ], "name": "approveAndCall", "outputs": [ { "name": "success", "type": "bool" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" }, { "name": "", "type": "address" } ], "name": "allowance", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "inputs": [ { "name": "initialSupply", "type": "uint256", "index": 0, "typeShort": "uint", "bits": "256", "displayName": "initial Supply", "template": "elements_input_uint", "value": "10000" } ], "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": true, "name": "from", "type": "address" }, { "indexed": true, "name": "to", "type": "address" }, { "indexed": false, "name": "value", "type": "uint256" } ], "name": "Transfer", "type": "event" } ]';
	var abiPokeCentral = '[ { "constant": true, "inputs": [ { "name": "", "type": "address" }, { "name": "", "type": "uint256" } ], "name": "balanceOf", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_pokeOwner", "type": "address" } ], "name": "qtdePokemonsMapping", "outputs": [ { "name": "qtde", "type": "uint256" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_pokeOwner", "type": "address" } ], "name": "qtdePokemons", "outputs": [ { "name": "qtde", "type": "uint256" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "totalPokemonSupply", "outputs": [ { "name": "", "type": "uint256", "value": "4" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "pokemonIndex", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" } ], "name": "pokeOwnerIndex", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "newMarket", "type": "address" } ], "name": "updateMarket", "outputs": [], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "pokeMasters", "outputs": [ { "name": "pokeMaster", "type": "address", "value": "0x6a5b342ec71def8aac337b82969d9ddd811023c9" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "pokemonToMaster", "outputs": [ { "name": "", "type": "address", "value": "0x6a5b342ec71def8aac337b82969d9ddd811023c9" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "market", "outputs": [ { "name": "", "type": "address", "value": "0x0000000000000000000000000000000000000000" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "pokemons", "outputs": [ { "name": "pokeNumber", "type": "uint256", "value": "0" }, { "name": "pokeName", "type": "string", "value": "Pokemon 0" }, { "name": "pokeType", "type": "string", "value": "invalid" }, { "name": "pokeCP", "type": "uint256", "value": "0" }, { "name": "pokeHP", "type": "uint256", "value": "0" }, { "name": "pokemonHash", "type": "bytes32", "value": "0x3fc18b72573621f80ca8c38c63a8830b47ab5e2754800269597945955daf943c" }, { "name": "pokeOwner", "type": "address", "value": "0x6a5b342ec71def8aac337b82969d9ddd811023c9" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "owner", "outputs": [ { "name": "", "type": "address", "value": "0x6a5b342ec71def8aac337b82969d9ddd811023c9" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "marketAddress", "outputs": [ { "name": "", "type": "address", "value": "0x0000000000000000000000000000000000000000" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_pokemonNumber", "type": "uint256" }, { "name": "_cp", "type": "uint256" }, { "name": "_hp", "type": "uint256" } ], "name": "updatePokemon", "outputs": [ { "name": "success", "type": "bool" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "pokemonNumber", "type": "uint256" }, { "name": "cp", "type": "uint256" }, { "name": "hp", "type": "uint256" } ], "name": "newPokemon", "outputs": [ { "name": "success", "type": "bool" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_from", "type": "address" }, { "name": "_to", "type": "address" }, { "name": "_pokemonID", "type": "uint256" } ], "name": "transferPokemon", "outputs": [ { "name": "pokemonID", "type": "uint256" }, { "name": "from", "type": "address" }, { "name": "to", "type": "address" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" }, { "name": "", "type": "uint256" } ], "name": "pokemonNameTypes", "outputs": [ { "name": "", "type": "string", "value": "Pokemon 0" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "pokemonMaster", "type": "address" } ], "name": "newPokemonMaster", "outputs": [ { "name": "success", "type": "bool" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_pokeOwner", "type": "address" } ], "name": "listPokemons", "outputs": [ { "name": "", "type": "address" }, { "name": "", "type": "uint256[]" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "newOwner", "type": "address" } ], "name": "transferOwnership", "outputs": [], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" } ], "name": "totalPokemonsFromMaster", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "inputs": [], "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "from", "type": "address" }, { "indexed": false, "name": "to", "type": "address" }, { "indexed": false, "name": "value", "type": "uint256" } ], "name": "Transfer", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "id", "type": "uint256" }, { "indexed": false, "name": "name", "type": "string" }, { "indexed": false, "name": "cp", "type": "uint256" }, { "indexed": false, "name": "hp", "type": "uint256" } ], "name": "CreatePokemon", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "id", "type": "uint256" }, { "indexed": false, "name": "name", "type": "string" }, { "indexed": false, "name": "cp", "type": "uint256" }, { "indexed": false, "name": "hp", "type": "uint256" } ], "name": "UpdatePokemon", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "owner", "type": "address" }, { "indexed": false, "name": "total", "type": "uint256" } ], "name": "UpdateMasterPokemons", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "number", "type": "uint256" } ], "name": "Log1", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "message", "type": "string" } ], "name": "Log2", "type": "event" } ]';
	var abiPokeMarket = '[ { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "pokeSales", "outputs": [ { "name": "pokeSeller", "type": "address", "value": "0xffae2a502a6142a00dbb54361e244ed55461c7aa" }, { "name": "pokeBuyer", "type": "address", "value": "0x0000000000000000000000000000000000000000" }, { "name": "pokeID", "type": "uint256", "value": "1" }, { "name": "pokePrice", "type": "uint256", "value": "1500" }, { "name": "pokeSold", "type": "bool", "value": false }, { "name": "pokeSellActive", "type": "bool", "value": false } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "pokeSaleIndex", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "pokeCoinDapp", "outputs": [ { "name": "", "type": "address", "value": "0xf43f2487e6f385b7e15b583d1cb4b61bf1e31349" } ], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "pokeSelling", "outputs": [ { "name": "", "type": "bool", "value": false } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "_from", "type": "address" }, { "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" } ], "name": "transferCoin", "outputs": [], "type": "function" }, { "constant": false, "inputs": [ { "name": "pokeSellerAddress", "type": "address" }, { "name": "pokemonID", "type": "uint256" }, { "name": "pokemonSalePrice", "type": "uint256" } ], "name": "newSale", "outputs": [ { "name": "success", "type": "bool" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "totalPokemonSales", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "constant": true, "inputs": [], "name": "pokemonDapp", "outputs": [ { "name": "", "type": "address", "value": "0xaec2d22fab72be8b9fb71359d833a4819cf47186" } ], "type": "function" }, { "constant": false, "inputs": [ { "name": "pokeSellerAddress", "type": "address" }, { "name": "pokemonID", "type": "uint256" } ], "name": "stopSale", "outputs": [], "type": "function" }, { "constant": false, "inputs": [ { "name": "pokeBuyerAddress", "type": "address" }, { "name": "pokemonID", "type": "uint256" } ], "name": "buyPokemon", "outputs": [], "type": "function" }, { "constant": false, "inputs": [ { "name": "_from", "type": "address" }, { "name": "_to", "type": "address" }, { "name": "_pokemonID", "type": "uint256" } ], "name": "transferPokemon", "outputs": [], "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "address" }, { "name": "", "type": "uint256" } ], "name": "pokeMasterSelling", "outputs": [ { "name": "", "type": "uint256", "value": "0" } ], "type": "function" }, { "inputs": [ { "name": "pokeCoinAddress", "type": "address", "index": 0, "typeShort": "address", "bits": "", "displayName": "poke Coin Address", "template": "elements_input_address", "value": "0xf43f2487E6f385b7e15b583D1cB4b61BF1e31349" }, { "name": "pokeRepositoryAddress", "type": "address", "index": 1, "typeShort": "address", "bits": "", "displayName": "poke Repository Address", "template": "elements_input_address", "value": "0xaec2D22fAB72BE8b9fB71359D833a4819Cf47186" } ], "type": "constructor" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "pokeSellerAddress", "type": "address" }, { "indexed": false, "name": "pokemonID", "type": "uint256" }, { "indexed": false, "name": "pokemonSalePrice", "type": "uint256" } ], "name": "NewSale", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "pokeSellerAddress", "type": "address" }, { "indexed": false, "name": "pokemonID", "type": "uint256" } ], "name": "StopSale", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "pokeBuyerAddress", "type": "address" }, { "indexed": false, "name": "pokeSellerAddress", "type": "address" }, { "indexed": false, "name": "pokemonID", "type": "uint256" } ], "name": "PokeTrade", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": false, "name": "status", "type": "bool" } ], "name": "Log1", "type": "event" } ]';

	// Carregamento dos Contratos
	var MyPokecoinContract = web3.eth.contract(abiPokeCoin);
	var pokeCoin = MyPokecoinContract.at(pokeCoinAddress);

	var MyPokeCentralContract = web3.eth.contract(abiPokeCentral);
	var pokeCentral = MyPokeCentralContract.at(pokeCentralAddress);

	var MyPokeMarket = web3.eth.contract(abiPokeMarket);
	var pokeMarket = MyIssuePokemonContract






































